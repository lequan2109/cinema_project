{% extends 'cinema_app/base.html' %}
{% block title %}Báo cáo{% endblock %}
{% block content %}
<h2>Báo cáo doanh thu</h2>
<form class="row g-2 mb-3">
  <div class="col-auto">
    <label class="form-label">Từ ngày</label>
    <input type="date" class="form-control" name="start" value="{{ start }}">
  </div>
  <div class="col-auto">
    <label class="form-label">Đến ngày</label>
    <input type="date" class="form-control" name="end" value="{{ end }}">
  </div>
  <div class="col-auto align-self-end">
    <button class="btn btn-outline-primary">Lọc</button>
  </div>
</form>
<div class="card mb-3"><div class="card-body">
  <div>Tổng vé: <b>{{ count }}</b></div>
  <div>Doanh thu: <b>{{ revenue }}</b></div>
</div></div>
<h5>Theo phim</h5>
<table class="table table-sm table-striped">
  <thead><tr><th>Phim</th><th>Số vé</th><th>Doanh thu</th></tr></thead>
  <tbody>
    {% for r in by_movie %}
      <tr><td>{{ r.showtime__movie__title }}</td><td>{{ r.tickets }}</td><td>{{ r.money }}</td></tr>
    {% empty %}
      <tr><td colspan="3">Không có dữ liệu.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
